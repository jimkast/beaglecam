<section ng-controller="AnswersController" ng-init="findWithGrade()">

    <div class="page-header clearfix">
        <h3><b>Q:</b> 
            <span ng-bind="answer.question.name"></span>
        </h3>

        <b class="pull-left">Description:</b> 
        <p ng-bind="answer.question.content"></p>

    </div>

    <div class="row">

        <div class="col-xs-6">
            <h2>Answer</h2>

            <video controls ng-src="{{answer.localVideo}}"></video>



            <p>
                <small>
                    <em class="text-muted">Posted on
                        <span ng-bind="answer.created | date:'mediumDate'"></span>
                        by
                        <span ng-bind="answer.user.displayName"></span>
                    </em>
                </small>
            </p>



            <div class="panel panel-success" ng-show="true||authentication.hasRole('teacher')">

                <div class="panel-heading">Teacher's Area</div>
                <div class="panel-body">

                    <form ng-submit="grade._id ? Grades.update() : Grades.create()">
                        <label>Put a grade:</label>&nbsp;
                        <span style="width:200px;display:inline-block;vertical-align:top;text-align:center">
                            <input type="range" min="0" max="10" value="3" ng-model="grade.value" />
                            <br>
                            <div>
                                <span class="h1" ng-bind="grade.value"></span>&nbsp;
                            </div>
                        </span>&nbsp;
                        <input type="submit" class="btn btn-primary" value="SAVE" />
                    </form>
                </div>
            </div>

        </div>

        <aside class="col-xs-5 col-xs-offset-1">

            <div class="panel panel-default">
                <div class="panel-heading">User Info</div>

                <div class="panel-body">
                    <h4 ng-bind="answer.user.displayName"></h4>
                    <small ng-bind="answer.user.email"></small>
                    <h5><b>Bio:</b>
                    </h5>
                    <p ng-bind="answer.user.bio"></p>
                </div>
            </div>


            <h3>All user answers</h3>
            <hr>
            <ul class="list-unstyled" ng-init="Answers.find({'user': answer.user._id})">

                <li ng-repeat="ans in answers | orderBy: 'question.name' | groupBy:['question._id']">
                    <h4 ng-bind="ans.question.name" ng-show="ans.group_by_CHANGED"></h4>

                    <ul class="list-unstyled row">
                        <li class="list-group-item col-xs-3">
                            <a ng-href="{{Answers.urls.view(ans._id)}}">
                                <img ng-src="{{ans.thumbnail}}" />
                            </a>
                        </li>
                    </ul>
                </li>

            </ul>


        </aside>


    </div>
</section>
